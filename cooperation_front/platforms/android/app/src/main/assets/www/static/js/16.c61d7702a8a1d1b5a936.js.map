{"version":3,"sources":["webpack:///src/view/MyInfo/MyNotification.vue","webpack:///./src/view/MyInfo/MyNotification.vue?bba0","webpack:///./src/view/MyInfo/MyNotification.vue"],"names":["MyNotification","components","Footer","data","tags","activeName","notifications","num","methods","handleClick","tab","console","log","name","query","type","this","getNotifications","_this","arguments","length","undefined","asyncToGenerator_default","regenerator_default","a","mark","_callee","user","wrap","_context","prev","next","Object","model_user","sent","helper","filter","$and","receiver","_id","stop","mounted","MyInfo_MyNotification","render","_vm","_h","$createElement","_c","_self","staticStyle","height","staticClass","attrs","value","margin-top","_v","span","on","tab-click","model","callback","$$v","expression","_l","item","key","width","label","_s","offset","background-color","round","size","icon","text-align","message","time","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/16.c61d7702a8a1d1b5a936.js","sourcesContent":["<template>\n  <el-container>\n    <el-header style=\"height:150px\">\n      <el-row>\n        <el-badge :value=\"num\" class=\"message\">\n          <h1 style=\"margin-top: 0px\">我的消息</h1>\n        </el-badge>\n      </el-row>\n      <el-row>\n        <el-col :span=\"16\">\n          <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n              <el-tab-pane  v-for=\"item in tags\" :key=\"item\"  :label=\"item\" :name=\"item\" style=\"width: 100px\">{{item}}</el-tab-pane>\n          </el-tabs>\n        </el-col>\n        <el-col :span=\"6\" :offset=\"1\">\n          <el-button round style=\"background-color: #C1D3E8\">全部已读</el-button>\n        </el-col>\n      </el-row>\n    </el-header>\n    <el-main>\n      <div class=\"big-box\" v-if=\"notifications.length>0\">\n        <el-row class=\"small-box\" v-for=\"item in notifications\" :key=\"item._id\">\n          <el-col :span=\"6\">\n            <el-avatar :size=\"40\" icon=\"el-icon-user-solid\"></el-avatar>\n          </el-col>\n          <el-col :span=\"14\">\n            <el-row style=\"text-align: left\">{{item.message}}</el-row>\n            <el-row style=\"text-align: left\">{{item.time}}</el-row>\n          </el-col>\n\n          <el-col :span=\"2\" >\n            <i class=\"el-icon-message\"></i>\n          </el-col>\n        </el-row>\n      </div>\n      <div class=\"big-box\" v-else>\n        <el-row>\n          暂无消息\n        </el-row>\n      </div>\n    </el-main>\n\n\n    <Footer></Footer>\n  </el-container>\n\n</template>\n\n<script>\n    import Footer from \"../../components/Footer\";\n    import {Post} from \"../../model/helper\";\n    import {getUserInfo} from \"../../model/user\";\n\n    export default{\n        components:{\n            Footer,\n        },\n        data(){\n            return {\n                tags:['关于计划', '关于好友'],\n                activeName:'关于计划',\n                notifications:[\n                    ],\n                num:0\n            }\n        },\n\n        methods:{\n            handleClick(tab) {\n                console.log(tab.name);\n                let query = {}\n                if(tab.name=='关于好友'){\n                    query={\"type\": \"friend\"}\n                }\n                else{\n                    query = {'type': 'plan'}\n                }\n                this.getNotifications(query)\n            },\n\n            async getNotifications(query={}){\n                let user = await getUserInfo()\n                let notifications = await Post('/api/notification/find', {filter:{\"$and\":[{receiver: user.data._id}, query]}})\n                console.log(notifications)\n                this.notifications = notifications.data\n            }\n        },\n\n        mounted(){\n            this.getNotifications()\n        }\n    }\n\n</script>\n\n<style>\n  .long-button{\n    width: 100%;\n    background-color: #B8CDE6;\n    height: 50px;\n  }\n  .big-box{\n    border: 2px solid #C1D3E8;\n  }\n  .message{\n    margin-top: 10px;\n    margin-right: 40px;\n  }\n  .small-box{\n    background-color: #B8CDE6;\n    margin: 10px;\n    height: 50px;\n    display: flex;\n    align-items: center;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/MyInfo/MyNotification.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',{staticStyle:{\"height\":\"150px\"}},[_c('el-row',[_c('el-badge',{staticClass:\"message\",attrs:{\"value\":_vm.num}},[_c('h1',{staticStyle:{\"margin-top\":\"0px\"}},[_vm._v(\"我的消息\")])])],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":16}},[_c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},_vm._l((_vm.tags),function(item){return _c('el-tab-pane',{key:item,staticStyle:{\"width\":\"100px\"},attrs:{\"label\":item,\"name\":item}},[_vm._v(_vm._s(item))])}),1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6,\"offset\":1}},[_c('el-button',{staticStyle:{\"background-color\":\"#C1D3E8\"},attrs:{\"round\":\"\"}},[_vm._v(\"全部已读\")])],1)],1)],1),_vm._v(\" \"),_c('el-main',[(_vm.notifications.length>0)?_c('div',{staticClass:\"big-box\"},_vm._l((_vm.notifications),function(item){return _c('el-row',{key:item._id,staticClass:\"small-box\"},[_c('el-col',{attrs:{\"span\":6}},[_c('el-avatar',{attrs:{\"size\":40,\"icon\":\"el-icon-user-solid\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":14}},[_c('el-row',{staticStyle:{\"text-align\":\"left\"}},[_vm._v(_vm._s(item.message))]),_vm._v(\" \"),_c('el-row',{staticStyle:{\"text-align\":\"left\"}},[_vm._v(_vm._s(item.time))])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('i',{staticClass:\"el-icon-message\"})])],1)}),1):_c('div',{staticClass:\"big-box\"},[_c('el-row',[_vm._v(\"\\n        暂无消息\\n      \")])],1)]),_vm._v(\" \"),_c('Footer')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1974d247\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/MyInfo/MyNotification.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1974d247\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MyNotification.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MyNotification.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MyNotification.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1974d247\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MyNotification.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/MyInfo/MyNotification.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}