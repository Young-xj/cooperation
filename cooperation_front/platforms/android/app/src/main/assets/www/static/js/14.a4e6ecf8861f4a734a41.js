webpackJsonp([14],{f5u9:function(e,t){},m9xP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("TVmP"),n=a("DZOf"),s=a("Ui/T"),l={components:{Footer:i.a},data:function(){return{tags:["我的关注","新的好友"],activeName:"我的关注",notifications:[{_id:1,name:"nickname",time:"2019-10-22 8:30",read:"false"},{_id:2,name:"nickname",time:"2019-10-22 8:30",read:"false"},{_id:3,name:"nickname",time:"2019-10-22 8:30",read:"false"},{_id:4,name:"nickname",time:"2019-10-22 8:30",read:"false"},{_id:5,name:"nickname",time:"2019-10-22 8:30",read:"false"},{_id:6,name:"nickname",time:"2019-10-22 8:30",read:"false"}],search:"",dialogVisible:!1,search2:"",searchusers:[],friends:[],user:{}}},methods:{handleClick:function(e){console.log(e.name)},findNew:function(){var e=this;if(""!=this.search2){var t=this.search2,a={$or:[{nickname:{$regex:t}},{email:t}]};Object(n.b)("/api/user/find",{filter:a}).then(function(t){console.log(t),e.searchusers=t.data})}},addFriend:function(e,t){var a=this;Object(n.b)("/api/user/add/friend",{uid:e}).then(function(t){0!=t.code&&a.$message({message:t.error,type:"warning"});var i={};i.sender=a.user._id,i.receiver=e,i.message=a.user.nickname+" 添加你为好友";var s=new Date;i.time=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+"-"+s.getHours()+":"+s.getMinutes(),i.is_read=!1,i.type="friend",Object(n.b)("/api/notification/create",i).then(function(e){console.log(e)})})},getFriend:function(){var e=this;Object(s.a)().then(function(t){if(0!=t.code)return alert("宁没有登录"),void e.$router.push({path:"/"});e.user=t.data;var a=t.data.friend;void 0==a&&(a=[]),Object(n.b)("/api/user/find",{filter:{_id:{$in:a}}}).then(function(t){console.log(t),e.friends=t.data})})}},mounted:function(){this.getFriend()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{height:"150px"}},[a("el-row",[a("h1",{staticStyle:{"margin-top":"0px"}},[e._v("我的好友")])]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tags,function(t){return a("el-tab-pane",{key:t,staticStyle:{width:"100px"},attrs:{label:t,name:t}},[a("el-input",{attrs:{size:"small",placeholder:"请输入搜索内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)}),1)],1),e._v(" "),a("el-col",{attrs:{span:6,offset:1}},[a("el-button",{staticStyle:{"background-color":"#C1D3E8"},attrs:{round:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加好友")])],1)],1)],1),e._v(" "),a("el-main",[a("el-dialog",{attrs:{title:"输入用户email或者昵称",visible:e.dialogVisible,width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",{staticStyle:{display:"flex","align-items":"center"}},[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{size:"small",placeholder:"请输入搜索内容"},model:{value:e.search2,callback:function(t){e.search2=t},expression:"search2"}})],1),e._v(" "),a("el-col",{attrs:{span:4,offset:1}},[a("el-button",{attrs:{size:"mini",round:""},on:{click:e.findNew}},[e._v("搜索")])],1)],1),e._v(" "),e._l(e.searchusers,function(t){return a("el-row",{key:t._id,staticClass:"small-box",staticStyle:{"background-color":"#fff"}},[a("el-col",{attrs:{span:6}},[a("el-avatar",{attrs:{size:40,icon:"el-icon-user-solid"}})],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-row",{staticStyle:{"text-align":"left"}},[e._v(e._s(t.nickname))])],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){return e.addFriend(t._id,t.nickname)}}},[e._v("添加")])],1)],1)}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],2),e._v(" "),a("div",{staticClass:"big-box"},e._l(e.friends,function(t){return a("el-row",{key:t._id,staticClass:"small-box"},[a("el-col",{attrs:{span:6}},[a("el-avatar",{attrs:{size:40,icon:"el-icon-user-solid"}})],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-row",{staticStyle:{"text-align":"left"}},[e._v(e._s(t.nickname))]),e._v(" "),a("el-row",{staticStyle:{"text-align":"left"}},[e._v(e._s(t.email))])],1)],1)}),1)],1),e._v(" "),a("Footer")],1)},staticRenderFns:[]};var o=a("VU/8")(l,r,!1,function(e){a("f5u9")},null,null);t.default=o.exports}});
//# sourceMappingURL=14.a4e6ecf8861f4a734a41.js.map